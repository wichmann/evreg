{% extends 'templates/layout.html' %}

{% block title %}Bestätigung Auszubildende(r){% endblock %}

{% block content %}
<div class="container">
  <div class="page-header">
    <h1>Bestätigung Auszubildende(r)</h1>
  </div>
  {% if not student_validation or not trainer_validation %}
  <div class="errors">
    <h3>Problem!</h3>
    <p>Es wurde keine gültige Schüler-ID angegeben!</p>
  </div>
  {% else %}
  {% if firsttime is defined %}
  <div class="bg-success p-3 my-3 text-white rounded">
    <h5>Erfolg!</h5>
    <p>Sie haben sich erfolgreich angemeldet für die Excellence Initiative 2026 der Berufsbildenden Schulen Brinkstraße!</p>
  </div>
  {% endif %}
  <div class="card mb-3">
    <div class="card-header"><strong><span class="initial-number">1.</span>Anmeldung wurde gespeichert</strong>
      <span class="check-success">
        <i class="bi bi-check-circle"></i>
      </span>
    </div>
    <div class="card-body">
      <ul id="participant">
        <li>
          <span class="field-name">Vorname :</span>
          <span class="field-value">{{ participant.firstname }}</span>
        </li>
        <li>
          <span class="field-name">Nachname :</span>
          <span class="field-value">{{ participant.lastname }}</span>
        </li>
        <li>
          <span class="field-name">Klasse:</span>
          <span class="field-value">{{ participant.classname }}</span>
        </li>
        <li>
          <span class="field-name">Email-Adresse Auszubildende(r):</span>
          <span class="field-value">{{ participant.email_student }}</span>
        </li>
        <li>
          <span class="field-name">Name des Ausbildungsbetriebs:</span>
          <span class="field-value">{{ participant.company_name }}</span>
        </li>
        <li>
          <span class="field-name">Name der Ausbilderin bzw. des Ausbilders:</span>
          <span class="field-value">{{ participant.trainer_name }}</span>
        </li>
        <li>
          <span class="field-name">Email-Adresse Ausbilder(in):</span>
          <span class="field-value">{{ participant.email_trainer }}</span>
        </li>
      </ul>
    </div>
  </div>

  <div class="card mb-3">
    <div class="card-header"><strong><span class="initial-number">2.</span>Speichern des Links dieser Seite</strong>
      <span class="check-success">
        <i class="bi bi-check-circle"></i></span>
    </div>
    <div class="card-body">
      <p>Bitte kopieren Sie sich den folgenden Link:
        <span class="highlight-link"><a
            href="{{url_for('validate_student', _external=True, student=student_validation)}}">{{url_for('validate_student',
            _external=True, student=student_validation)}}</a>
          <button type="button" class="btn btn-secondary btn-sm"
            onclick="navigator.clipboard.writeText('{{url_for("validate_student", _external=True,student=student_validation)}}');">
            <span style="font-size: large; background-color: transparent;">
              <i class="bi bi-clipboard"></i>
            </span>
          </button>
        </span>
      </p>
      <p>Damit können Sie später die gespeicherten Daten überprüfen, sich abmelden oder die Bestätigungsmail noch einmal
        senden.</p>
    </div>
  </div>

  <div class="card mb-3">
    <div class="card-header"><strong><span class="initial-number">3.</span> Bestätigung der eigenen Email-Adresse</strong>
      {% if participant.student_validated %}
      <span class="check-success">
        <i class="bi bi-check-circle"></i></span>
      {% else %}
      <span class="check-fail">
        <i class="bi bi-x-circle"></i></span>
      {% endif %}
    </div>
    <div class="card-body">
      <p>Als nächstes bekommen Sie eine Email mit einem Bestätigungslink, den Sie anklicken müssen, um die Email-Adresse
        zu bestätigen.</p>
    </div>
  </div>

  <div class="card mb-3">
    <div class="card-header"><strong><span class="initial-number">4.</span>Bestätigung der der Anmeldung durch die
      Ausbilderin bzw. den Ausbilder</strong>
      {% if participant.trainer_validated %}
      <span class="check-success">
        <i class="bi bi-check-circle"></i></span>
      {% else %}
      <span class="check-fail">
        <i class="bi bi-x-circle"></i></span>
      {% endif %}
    </div>
    <div class="card-body">
      <p>Danach bekommt Ihre Ausbilderin bzw. Ihr Ausbilder eine Email, in der die Teilnahme bestätigt werden muss.</p>
    </div>
  </div>

  <div>
    {% if not participant.student_validated %}
    <a target="_blank" href="{{url_for('send_mail_again', student=student_validation)}}"><button type="button"
        class="btn btn-warning">Bestätigungsmail Auszubildende(r) schicken</button></a>
    {% endif %}
    {% if participant.student_validated and not participant.trainer_validated %}
    <a target="_blank" href="{{url_for('send_mail_again', trainer=trainer_validation)}}"><button type="button"
        class="btn btn-warning">Bestätigungsmail Ausbilder(in) schicken</button></a>
    {% endif %}
    <a target="_blank" href="{{url_for('delete_registration', student=student_validation)}}"><button type="button"
        class="btn btn-danger">Anmeldung löschen</button></a>
  </div>
  {% endif %}
</div>
{% endblock %}